# 前言
这个记录初赛可能会用到的一些小知识

# 数学相关
## 康托展开和康托逆展开
康托展开和逆展开实现了长度为$n$的排列和满足$A\in[0,n!-1], a\in \mathbb{Z}$的双射。

首先是康托展开，对于一个序列$a_{1...n}$，我们预处理出序列$c_{1...n}$，其中
$$
c_i=\sum_{j=i+1}^n [a_j < a_i]
$$
用人话来讲，$c_i$表示第$i$个位置之后，比第$a_i$小的数字的个数。

那么康托展开就可以这么表示：
$$
A=\sum_{i=1}^n c_i\times (n-i)!
$$
聪明的你应该发现了，这个$A$其实就是$1...n$的所有排列中排列$a_{1...n}$的排名（排名是$0～n!-1$）。

接着是康托逆展开，可以认为是康托展开的逆运算，我们从前往后计算出$c_{1...n}$，接着根据$c_{1...n}$和剩下的可选的数得到每个位置的数。

首先定义递推式，就是不断取模：
$$
A_0=A\\
A_i=A_{i-1}\%(n-i+1)
$$
那么就可以得到：
$$
c_i=\lfloor\frac{A_i}{(n-i)!}\rfloor
$$
接着，根据$c_{1...n}$的定义，可以发现$a_i$就是前$i-1$的位置选定之后剩下的数字中的第$c_i+1$个数。